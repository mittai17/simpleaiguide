<section class="w-full max-w-3xl mx-auto mt-16 px-4">
    <div class="flex items-center gap-4 mb-8">
        <div class="h-px bg-slate-200 dark:bg-slate-800 flex-1"></div>
        <span
            class="text-slate-400 dark:text-slate-500 font-medium text-sm uppercase tracking-widest"
            >Discussion</span
        >
        <div class="h-px bg-slate-200 dark:bg-slate-800 flex-1"></div>
    </div>

    <!-- Giscus Container -->
    <div class="giscus-frame min-h-[160px]">
        <script
            src="https://giscus.app/client.js"
            data-repo="mittai17/simpleaiguide"
            data-repo-id="R_kgDOQgWPhg"
            data-category="Announcements"
            data-category-id="DIC_kwDOQgWPhs4CzphA"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="transparent_dark"
            data-lang="en"
            crossorigin="anonymous"
            async></script>
    </div>

    <p class="text-center text-xs text-slate-400 mt-4">
        Powered by <a
            href="https://giscus.app"
            target="_blank"
            rel="noreferrer"
            class="hover:text-indigo-500 transition-colors">Giscus</a
        >. Comments are stored on GitHub.
    </p>
</section>

<script>
    // Theme Sync Logic for Giscus
    function updateGiscusTheme() {
        const theme = document.documentElement.classList.contains("dark")
            ? "transparent_dark"
            : "light";
        const iframe = document.querySelector(
            "iframe.giscus-frame",
        ) as HTMLIFrameElement;

        if (!iframe) return;

        iframe.contentWindow?.postMessage(
            { giscus: { setConfig: { theme: theme } } },
            "https://giscus.app",
        );
    }

    // Observer for theme changes
    const observer = new MutationObserver(updateGiscusTheme);
    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ["class"],
    });
</script>
