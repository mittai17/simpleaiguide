---
import Search from "./Search.astro";
const links = [
  { href: "/", label: "Home" },
  { href: "/learn", label: "Learn" },
  { href: "/blog", label: "Blog" },
  { href: "/about", label: "About" },
  { href: "/contact", label: "Contact" },
];
---

<nav
  class="sticky top-0 z-50 w-full border-b border-slate-100 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60"
>
  <div class="container mx-auto flex h-16 items-center justify-between px-4">
    <a
      href="/"
      class="flex items-center gap-3 text-2xl font-extrabold tracking-tight text-slate-900 hover:text-indigo-600 transition-colors font-sans"
    >
      <img
        src="/assets/logo.webp?v=2"
        alt="Simple AI Guide Logo"
        class="h-14 w-auto"
      />
      Simple <span class="text-indigo-600">AI Guide</span>
    </a>

    <div class="hidden lg:flex items-center gap-6">
      <div class="flex gap-6 items-center">
        <a
          href="/"
          class="text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors"
          >Home</a
        >

        <!-- Learn Dropdown -->
        <div class="relative group">
          <button
            class="flex items-center gap-1 text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors focus:outline-none"
          >
            Learn
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              class="w-4 h-4 text-slate-400 group-hover:text-indigo-600 transition-colors"
            >
              <path
                fill-rule="evenodd"
                d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                clip-rule="evenodd"></path>
            </svg>
          </button>
          <div
            class="absolute top-full left-0 w-56 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0"
          >
            <div
              class="bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden p-2"
            >
              <a
                href="/learn/ai-basics"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >AI Basics</a
              >
              <a
                href="/learn/machine-learning"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >Machine Learning</a
              >
              <a
                href="/learn/deep-learning"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >Deep Learning</a
              >
              <a
                href="/learn/python-for-ai"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >Python for AI</a
              >
              <a
                href="/learn/math-for-ai"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >Math for AI</a
              >
            </div>
          </div>
        </div>

        <!-- Blog Dropdown -->
        <div class="relative group">
          <button
            class="flex items-center gap-1 text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors focus:outline-none"
          >
            Blog
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              class="w-4 h-4 text-slate-400 group-hover:text-indigo-600 transition-colors"
            >
              <path
                fill-rule="evenodd"
                d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
                clip-rule="evenodd"></path>
            </svg>
          </button>
          <div
            class="absolute top-full left-0 w-56 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0"
          >
            <div
              class="bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden p-2"
            >
              <a
                href="/blog/best-ai-tools"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >Best AI Tools</a
              >
              <a
                href="/blog/comparisons"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >Comparisons</a
              >
              <a
                href="/blog/prompt-engineering"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >Prompt Engineering</a
              >
              <a
                href="/blog/automation"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >Automation</a
              >
              <a
                href="/blog/news"
                class="block px-4 py-2 text-sm text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg"
                >AI News</a
              >
            </div>
          </div>
        </div>

        <a
          href="/about"
          class="text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors"
          >About</a
        >
        <a
          href="/contact"
          class="text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors"
          >Contact</a
        >
      </div>
      <Search />
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-btn"
      class="lg:hidden relative z-50 p-2 text-slate-600 hover:text-indigo-600 focus:outline-none"
      aria-label="Toggle menu"
    >
      <div class="w-6 h-5 relative flex flex-col justify-between">
        <span
          id="bar1"
          class="w-full h-0.5 bg-current rounded-full transition-all duration-300 origin-left"
        ></span>
        <span
          id="bar2"
          class="w-full h-0.5 bg-current rounded-full transition-all duration-300"
        ></span>
        <span
          id="bar3"
          class="w-full h-0.5 bg-current rounded-full transition-all duration-300 origin-left"
        ></span>
      </div>
    </button>
  </div>

  <!-- Mobile Menu Overlay -->
  <div
    id="mobile-menu"
    class="fixed inset-0 z-40 bg-white lg:hidden transition-all duration-300 ease-in-out opacity-0 invisible translate-x-full"
  >
    <div class="flex flex-col h-full pt-24 px-6 pb-8 overflow-y-auto">
      <div class="flex flex-col gap-2">
        <a
          href="/"
          class="flex items-center gap-3 text-xl font-bold text-slate-900 py-4 px-2 border-b border-slate-50 hover:bg-slate-50 rounded-xl transition-colors"
        >
          <span class="p-2 bg-indigo-50 rounded-lg text-indigo-600">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="w-5 h-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
              ></path>
            </svg>
          </span>
          Home
        </a>

        <!-- Learn Accordion -->
        <div class="border-b border-slate-50 py-2">
          <button
            class="flex items-center justify-between w-full text-xl font-bold text-slate-900 focus:outline-none accordion-btn p-2 hover:bg-slate-50 rounded-xl transition-colors"
            data-target="learn-accordion"
          >
            <div class="flex items-center gap-3">
              <span class="p-2 bg-emerald-50 rounded-lg text-emerald-600">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                  stroke="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.499 5.216 50.59 50.59 0 00-2.658.813m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"
                  ></path>
                </svg>
              </span>
              Learn
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="w-5 h-5 text-slate-400 transition-transform duration-300"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
            </svg>
          </button>
          <div
            id="learn-accordion"
            class="max-h-0 overflow-hidden transition-all duration-300 ease-in-out"
          >
            <div
              class="flex flex-col gap-2 pt-2 pl-4 border-l-2 border-slate-100 ml-6 my-2"
            >
              <a
                href="/learn/ai-basics"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >AI Basics</a
              >
              <a
                href="/learn/machine-learning"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >Machine Learning</a
              >
              <a
                href="/learn/deep-learning"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >Deep Learning</a
              >
              <a
                href="/learn/python-for-ai"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >Python for AI</a
              >
              <a
                href="/learn/math-for-ai"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >Math for AI</a
              >
            </div>
          </div>
        </div>

        <!-- Blog Accordion -->
        <div class="border-b border-slate-50 py-2">
          <button
            class="flex items-center justify-between w-full text-xl font-bold text-slate-900 focus:outline-none accordion-btn p-2 hover:bg-slate-50 rounded-xl transition-colors"
            data-target="blog-accordion"
          >
            <div class="flex items-center gap-3">
              <span class="p-2 bg-purple-50 rounded-lg text-purple-600">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                  stroke="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"
                  ></path>
                </svg>
              </span>
              Blog
            </div>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="w-5 h-5 text-slate-400 transition-transform duration-300"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
            </svg>
          </button>
          <div
            id="blog-accordion"
            class="max-h-0 overflow-hidden transition-all duration-300 ease-in-out"
          >
            <div
              class="flex flex-col gap-2 pt-2 pl-4 border-l-2 border-slate-100 ml-6 my-2"
            >
              <a
                href="/blog/best-ai-tools"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >Best AI Tools</a
              >
              <a
                href="/blog/comparisons"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >Comparisons</a
              >
              <a
                href="/blog/prompt-engineering"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >Prompt Engineering</a
              >
              <a
                href="/blog/automation"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >Automation</a
              >
              <a
                href="/blog/news"
                class="text-lg font-medium text-slate-600 hover:text-indigo-600 py-2 px-2 rounded-lg hover:bg-slate-50"
                >AI News</a
              >
            </div>
          </div>
        </div>

        <a
          href="/about"
          class="flex items-center gap-3 text-xl font-bold text-slate-900 py-4 px-2 border-b border-slate-50 hover:bg-slate-50 rounded-xl transition-colors"
        >
          <span class="p-2 bg-blue-50 rounded-lg text-blue-600">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="w-5 h-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"
              ></path>
            </svg>
          </span>
          About
        </a>
        <a
          href="/contact"
          class="flex items-center gap-3 text-xl font-bold text-slate-900 py-4 px-2 border-b border-slate-50 hover:bg-slate-50 rounded-xl transition-colors"
        >
          <span class="p-2 bg-orange-50 rounded-lg text-orange-600">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="w-5 h-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"
              ></path>
            </svg>
          </span>
          Contact
        </a>
      </div>

      <div class="mt-8">
        <Search />
      </div>
    </div>
  </div>
</nav>

<script>
  const btn = document.getElementById("mobile-menu-btn");
  const menu = document.getElementById("mobile-menu");
  const bar1 = document.getElementById("bar1");
  const bar2 = document.getElementById("bar2");
  const bar3 = document.getElementById("bar3");
  const accordionBtns = document.querySelectorAll(".accordion-btn");
  let isMenuOpen = false;

  btn?.addEventListener("click", () => {
    isMenuOpen = !isMenuOpen;

    if (isMenuOpen) {
      // Open Menu
      menu?.classList.remove("opacity-0", "invisible", "translate-x-full");
      menu?.classList.add("opacity-100", "visible", "translate-x-0");
      document.body.style.overflow = "hidden"; // Prevent scrolling

      // Animate Hamburger to X
      bar1?.classList.add("rotate-45", "translate-x-1", "-translate-y-0.5");
      bar2?.classList.add("opacity-0");
      bar3?.classList.add("-rotate-45", "translate-x-1", "translate-y-0.5");
    } else {
      // Close Menu
      menu?.classList.add("opacity-0", "invisible", "translate-x-full");
      menu?.classList.remove("opacity-100", "visible", "translate-x-0");
      document.body.style.overflow = ""; // Restore scrolling

      // Animate X back to Hamburger
      bar1?.classList.remove("rotate-45", "translate-x-1", "-translate-y-0.5");
      bar2?.classList.remove("opacity-0");
      bar3?.classList.remove("-rotate-45", "translate-x-1", "translate-y-0.5");
    }
  });

  // Accordion Logic
  accordionBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      const targetId = btn.getAttribute("data-target");
      const content = document.getElementById(targetId!);
      const icon = btn.querySelector("svg");

      if (content?.style.maxHeight) {
        content.style.maxHeight = "";
        icon?.classList.remove("rotate-180");
      } else {
        content!.style.maxHeight = content!.scrollHeight + "px";
        icon?.classList.add("rotate-180");
      }
    });
  });
</script>
